{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { User } from 'src/app/auth/models/user';\nimport { NavigationEnd } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/auth/auth.service\";\nimport * as i2 from \"src/app/apps-list/apps-list.service\";\nimport * as i3 from \"../../shared/shared.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/material/toolbar\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/flex-layout/extended\";\nimport * as i10 from \"@angular/material/menu\";\nimport * as i11 from \"@angular/material/divider\";\nimport * as i12 from \"@angular/flex-layout/flex\";\n\nfunction HeaderComponent_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 6)(1, \"a\", 1);\n    i0.ɵɵtext(2, \"Secretaria de Salud\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction HeaderComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\\u00A0 \", ctx_r1.selectedApp.name, \"\");\n  }\n}\n\nconst _c0 = function (a0) {\n  return [a0];\n};\n\nfunction HeaderComponent_ng_template_7_ng_container_17_figure_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"figure\", 20);\n    i0.ɵɵelement(1, \"img\", 21);\n    i0.ɵɵelementStart(2, \"figcaption\", 22);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const app_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, \"/\" + app_r6.route));\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", app_r6.icon, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(app_r6.name);\n  }\n}\n\nfunction HeaderComponent_ng_template_7_ng_container_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, HeaderComponent_ng_template_7_ng_container_17_figure_1_Template, 4, 5, \"figure\", 19);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const i_r7 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r7 < 9);\n  }\n}\n\nfunction HeaderComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ng_template_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.toggleSidenav();\n    });\n    i0.ɵɵelement(1, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"button\", 9);\n    i0.ɵɵelement(3, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-menu\", null, 10)(6, \"div\", 11);\n    i0.ɵɵelement(7, \"img\", 12);\n    i0.ɵɵelementStart(8, \"div\", 13)(9, \"strong\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"small\", 14);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"br\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(14, \"mat-divider\");\n    i0.ɵɵelementStart(15, \"div\")(16, \"div\", 15);\n    i0.ɵɵtemplate(17, HeaderComponent_ng_template_7_ng_container_17_Template, 2, 1, \"ng-container\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 17)(19, \"mat-icon\");\n    i0.ɵɵtext(20, \"apps\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(21, \"mat-divider\");\n    i0.ɵɵelementStart(22, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ng_template_7_Template_button_click_22_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.logout();\n    });\n    i0.ɵɵelementStart(23, \"mat-icon\");\n    i0.ɵɵtext(24, \"exit_to_app\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"span\");\n    i0.ɵɵtext(26, \"Cerrar sesi\\u00F3n\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(5);\n\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r2.user.avatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r2.user.avatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r2.user.avatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.user.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.user.email);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.apps);\n  }\n}\n\nfunction HeaderComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 23)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"account_circle\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(authService, appsService, sharedService, router) {\n      this.authService = authService;\n      this.appsService = appsService;\n      this.sharedService = sharedService;\n      this.router = router;\n      this.onSidenavToggle = new EventEmitter();\n      this.breakpoint = 6;\n      router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(event => {\n        this.getApps();\n        let routes = event.url.split('/', 2);\n        let selected_route = routes[1];\n        let currentApp = this.sharedService.getCurrentApp();\n\n        if (currentApp.name != selected_route) {\n          this.sharedService.newCurrentApp(selected_route);\n        }\n\n        if (selected_route) {\n          this.selectedApp = this.apps.find(function (element) {\n            return element.route == selected_route;\n          });\n        } else {\n          this.selectedApp = undefined;\n        }\n      });\n    }\n\n    ngOnInit() {\n      this.isAuthenticated = this.authService.isAuth();\n\n      if (this.isAuthenticated) {\n        this.user = this.authService.getUserData();\n      }\n\n      this.authSubscription = this.authService.authChange.subscribe(status => {\n        this.isAuthenticated = status;\n\n        if (status) {\n          this.user = this.authService.getUserData();\n        } else {\n          this.user = new User();\n        }\n      });\n      this.breakpoint = window.innerWidth <= 599 ? 3 : 6;\n    }\n\n    getApps() {\n      this.apps = this.appsService.getApps();\n    }\n\n    onResize(event) {\n      this.breakpoint = event.target.innerWidth <= 599 ? 3 : 6;\n    }\n\n    ngOnDestroy() {\n      this.authSubscription.unsubscribe();\n    }\n\n    toggleSidenav() {\n      this.onSidenavToggle.emit();\n    }\n\n    logout() {\n      this.authService.logout();\n    }\n\n  }\n\n  HeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n    return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.AppsListService), i0.ɵɵdirectiveInject(i3.SharedService), i0.ɵɵdirectiveInject(i4.Router));\n  };\n\n  HeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HeaderComponent,\n    selectors: [[\"app-header\"]],\n    outputs: {\n      onSidenavToggle: \"onSidenavToggle\"\n    },\n    decls: 9,\n    vars: 4,\n    consts: [[\"color\", \"primary\", 1, \"\"], [\"routerLink\", \"/\"], [\"style\", \"margin-left:10px\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"spacer\"], [3, \"ngIf\"], [2, \"margin-left\", \"10px\"], [\"mat-icon-button\", \"\", \"aria-label\", \"Mostrar Sidenav\", \"fxShow.xs\", \"\", \"fxHide.gt-sm\", \"\", 3, \"click\"], [\"alt\", \"\", 2, \"width\", \"auto\", \"margin\", \"auto\", 3, \"src\"], [\"mat-icon-button\", \"\", \"fxHide.xs\", \"true\", 3, \"matMenuTriggerFor\"], [\"menuAccount\", \"matMenu\"], [2, \"display\", \"flex\", \"justify-content\", \"start center\", \"background-color\", \"#008b8b\"], [\"alt\", \"\", 2, \"width\", \"80px\", \"margin\", \"10px\", 3, \"src\"], [2, \"width\", \"160px\", \"margin\", \"10px\", \"display\", \"flex\", \"flex-direction\", \"column\", \"justify-content\", \"center\", \"font-size\", \"0.8em\"], [2, \"color\", \"#777\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", 1, \"apps\"], [4, \"ngFor\", \"ngForOf\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/apps\", 2, \"text-align\", \"center\"], [\"mat-menu-item\", \"\", 3, \"click\"], [3, \"routerLink\", 4, \"ngIf\"], [3, \"routerLink\"], [\"alt\", \"Icon\", 3, \"src\"], [1, \"ellipsis\"], [\"routerLink\", \"/login\"]],\n    template: function HeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-toolbar\", 0)(1, \"a\", 1)(2, \"mat-icon\");\n        i0.ɵɵtext(3, \"apps\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(4, HeaderComponent_span_4_Template, 3, 0, \"span\", 2);\n        i0.ɵɵtemplate(5, HeaderComponent_span_5_Template, 2, 1, \"span\", 3);\n        i0.ɵɵelement(6, \"span\", 4);\n        i0.ɵɵtemplate(7, HeaderComponent_ng_template_7_Template, 27, 7, \"ng-template\", 5);\n        i0.ɵɵtemplate(8, HeaderComponent_ng_template_8_Template, 3, 0, \"ng-template\", 5);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.selectedApp);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedApp);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated);\n      }\n    },\n    directives: [i5.MatToolbar, i4.RouterLinkWithHref, i6.MatIcon, i7.NgIf, i8.MatButton, i9.DefaultShowHideDirective, i10.MatMenuTrigger, i10.MatMenu, i11.MatDivider, i12.DefaultLayoutDirective, i12.DefaultLayoutAlignDirective, i7.NgForOf, i4.RouterLink, i10.MatMenuItem],\n    styles: [\"a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:active{color:#d3d3d3}.navigation-items[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.app-toolbar[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:1000}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.apps[_ngcontent-%COMP%]{display:flex;flex:1;width:100%;margin:auto;height:auto;flex-direction:row;justify-content:flex-start;align-content:flex-start;flex-wrap:wrap;flex-flow:row wrap}.apps[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{display:block;flex-direction:column;text-align:center;width:33.33%;min-width:50px;margin:0;cursor:pointer}.apps[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:50px;height:50px;margin:15px auto}.apps[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]{font-size:.75em;color:#555;margin-bottom:15px}\"]\n  });\n  return HeaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}