{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Validators } from '@angular/forms';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { debounceTime, tap, switchMap, finalize } from 'rxjs/operators';\nimport { RegionesDialogComponent } from '../regiones-dialog/regiones-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/shared.service\";\nimport * as i2 from \"../../clues.service\";\nimport * as i3 from \"src/app/auth/auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/dialog\";\nimport * as i7 from \"@angular/flex-layout/flex\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/material/progress-spinner\";\nimport * as i10 from \"@angular/material/card\";\nimport * as i11 from \"@angular/material/icon\";\nimport * as i12 from \"@angular/material/form-field\";\nimport * as i13 from \"@angular/material/input\";\nimport * as i14 from \"@angular/material/select\";\nimport * as i15 from \"@angular/material/core\";\nimport * as i16 from \"@angular/material/autocomplete\";\nimport * as i17 from \"@angular/flex-layout/extended\";\nimport * as i18 from \"@angular/material/button\";\n\nfunction EditarComponent_div_3_mat_spinner_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\n\nfunction EditarComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵtemplate(1, EditarComponent_div_3_mat_spinner_1_Template, 1, 0, \"mat-spinner\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLoading);\n  }\n}\n\nfunction EditarComponent_mat_error_14_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"El Campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_error_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtemplate(1, EditarComponent_mat_error_14_span_1_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.cluesForm.get(\"clues\").errors.required);\n  }\n}\n\nfunction EditarComponent_mat_error_17_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"El Campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_error_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtemplate(1, EditarComponent_mat_error_17_span_1_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.cluesForm.get(\"descripcion\").errors.required);\n  }\n}\n\nfunction EditarComponent_mat_error_21_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"El Campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_error_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtemplate(1, EditarComponent_mat_error_21_span_1_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.cluesForm.get(\"direccion\").errors.required);\n  }\n}\n\nfunction EditarComponent_mat_error_24_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"El Campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_error_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtemplate(1, EditarComponent_mat_error_24_span_1_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.cluesForm.get(\"cp\").errors.required);\n  }\n}\n\nfunction EditarComponent_mat_form_field_26_mat_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r26 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r26.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r26.descripcion_tipo, \" \");\n  }\n}\n\nfunction EditarComponent_mat_form_field_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 34)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Microrregiones:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-select\", 35);\n    i0.ɵɵtemplate(4, EditarComponent_mat_form_field_26_mat_option_4_Template, 2, 2, \"mat-option\", 19);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.catalogos[\"microrregion\"]);\n  }\n}\n\nfunction EditarComponent_b_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"DISTRITO \", ctx_r6.distrito.clave_distrito, \" \", ctx_r6.distrito.descripcion, \"\");\n  }\n}\n\nfunction EditarComponent_b_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1, \"NO IDENTIFICADO\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_option_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r27 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r27.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r27.descripcion, \" \");\n  }\n}\n\nfunction EditarComponent_mat_error_39_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Campo obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_error_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtemplate(1, EditarComponent_mat_error_39_span_1_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.cluesForm.get(\"municipio_id\").errors.required);\n  }\n}\n\nfunction EditarComponent_mat_option_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 37);\n    i0.ɵɵelement(1, \"mat-spinner\", 38);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_ng_container_47_mat_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r30 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r30);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" [\", item_r30.clave_localidad, \"] \", item_r30.descripcion, \" \");\n  }\n}\n\nfunction EditarComponent_ng_container_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, EditarComponent_ng_container_47_mat_option_1_Template, 2, 3, \"mat-option\", 19);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r12.catalogos[\"localidades\"]);\n  }\n}\n\nfunction EditarComponent_mat_hint_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-hint\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" [ \", ctx_r13.cluesForm.get(\"catalogo_localidad\").value.clave_localidad, \" ] \");\n  }\n}\n\nfunction EditarComponent_mat_error_49_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Campo obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_error_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtemplate(1, EditarComponent_mat_error_49_span_1_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.cluesForm.get(\"catalogo_localidad\").errors.required);\n  }\n}\n\nfunction EditarComponent_mat_error_53_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"El Campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_error_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtemplate(1, EditarComponent_mat_error_53_span_1_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r15.cluesForm.get(\"telefono\").errors.required);\n  }\n}\n\nfunction EditarComponent_mat_error_56_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"El Campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_error_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtemplate(1, EditarComponent_mat_error_56_span_1_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r16.cluesForm.get(\"nucleos_camas\").errors.required);\n  }\n}\n\nfunction EditarComponent_mat_error_69_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"El Campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_error_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtemplate(1, EditarComponent_mat_error_69_span_1_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.cluesForm.get(\"latitud\").errors.required);\n  }\n}\n\nfunction EditarComponent_mat_error_72_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"El Campo es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction EditarComponent_mat_error_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtemplate(1, EditarComponent_mat_error_72_span_1_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r18.cluesForm.get(\"longitud\").errors.required);\n  }\n}\n\nfunction EditarComponent_ng_container_78_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function EditarComponent_ng_container_78_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const ctx_r36 = i0.ɵɵnextContext();\n      return ctx_r36.accionGuardar();\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" Guardar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r19.cluesForm.valid || ctx_r19.isLoading);\n  }\n}\n\nexport let EditarComponent = /*#__PURE__*/(() => {\n  class EditarComponent {\n    constructor(sharedService, cluesService, authService, route, fb, dialog, router) {\n      this.sharedService = sharedService;\n      this.cluesService = cluesService;\n      this.authService = authService;\n      this.route = route;\n      this.fb = fb;\n      this.dialog = dialog;\n      this.router = router;\n      this.lat = 16.75;\n      this.long = -93.1167;\n      this.datosRegion = [];\n      this.dataSourceRegiones = new MatTableDataSource(this.datosRegion);\n      this.estatus_clues = false;\n      this.cluesIsLoading = false;\n      this.localidadIsLoading = false;\n      this.catalogos = {};\n      this.filteredCatalogs = [];\n      this.puedeGuardar = true;\n      this.puedeValidar = true;\n      this.puedeTransferir = true;\n      this.necesitaActivarse = false;\n      this.responsableIsLoading = false;\n      this.fechaActual = '';\n      this.inicio_operacion = \"0000-00-00\";\n      this.fecha_acreditacion = \"0000-00-00\";\n      this.isLoading = false;\n      this.cluesForm = this.fb.group({\n        'catalogo_microrregion_id': ['', Validators.required],\n        'catalogo_localidad': ['', Validators.required],\n        'municipio_id': ['', Validators.required],\n        'clues': ['', Validators.required],\n        'descripcion': ['', Validators.required],\n        'direccion': [''],\n        'cp': ['', Validators.required],\n        'telefono': ['', Validators.required],\n        'nucleos_camas': ['', Validators.required],\n        //'inicio_operacion': [''],\n        //'fecha_operacion': [''],\n        'latitud': ['', Validators.required],\n        'longitud': ['', Validators.required]\n      });\n    }\n\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        //this.catalogos['localidades'] = [{id:1, descripcion:\"hola\"},{id:2, descripcion:\"hola 2\"}];\n        let fecha = new Date('YYYY-MM-D');\n        this.fechaActual = fecha;\n        yield this.IniciarCatalogos(null);\n        this.route.paramMap.subscribe(params => {\n          this.clues = params.get('id');\n\n          if (this.clues) {\n            this.loadCluesData(this.clues);\n          }\n        });\n      });\n    }\n\n    displayLocalidadFn(item) {\n      if (item) {\n        return item.descripcion;\n      }\n    }\n\n    IniciarCatalogos(obj) {\n      this.isLoading = true;\n      this.cluesService.obtenerCatalogos(obj).subscribe(response => {\n        this.catalogos = response;\n        this.isLoading = false;\n      });\n      this.cluesForm.get('catalogo_localidad').valueChanges.pipe(debounceTime(300), tap(() => {\n        //this.element.loading = true;\n        this.localidadIsLoading = true;\n      }), switchMap(value => {\n        if (!(typeof value === 'object')) {\n          this.localidadIsLoading = false;\n          let municipio = this.cluesForm.get('municipio_id').value;\n          return this.cluesService.obtenerLocalidades({\n            query: value,\n            municipio: municipio\n          }).pipe(finalize(() => this.localidadIsLoading = false));\n        } else {\n          this.localidadIsLoading = false;\n          return [];\n        }\n      })).subscribe(items => this.catalogos['localidades'] = items.data);\n    }\n\n    _filter(value, catalog, valueField) {\n      if (this.catalogos[catalog]) {\n        let filterValue = '';\n\n        if (value) {\n          if (typeof value == 'object') {\n            filterValue = value[valueField].toLowerCase();\n          } else {\n            filterValue = value.toLowerCase();\n          }\n        }\n\n        return this.catalogos[catalog].filter(option => option[valueField].toLowerCase().includes(filterValue));\n      }\n    }\n\n    getDisplayFn(label) {\n      return val => this.displayFn(val, label);\n    }\n\n    displayFn(value, valueLabel) {\n      return value ? value[valueLabel] : value;\n    }\n\n    validarFecha(valor) {\n      this.cluesForm.get('inicio_operacion').disable();\n      console.log(valor);\n    }\n\n    showRegionesDialog(index_editable = null) {\n      let configDialog = {};\n      let index = index_editable;\n\n      if (this.mediaSize == 'xs') {\n        configDialog = {\n          maxWidth: '100vw',\n          maxHeight: '100vh',\n          height: '100%',\n          width: '100%',\n          data: {\n            scSize: this.mediaSize,\n            editable: this.datosRegion[index_editable]\n          }\n        };\n      } else {\n        configDialog = {\n          width: '95%',\n          data: {\n            editable: this.datosRegion[index_editable]\n          }\n        };\n      }\n\n      const dialogRef = this.dialog.open(RegionesDialogComponent, configDialog);\n      dialogRef.afterClosed().subscribe(valid => {\n        if (valid) {\n          if (valid.estatus) {\n            if (index != null) {\n              this.datosRegion[index] = valid.datos;\n            } else {\n              if (this.datosRegion.length == 4) {\n                let mensaje = \"Solo se puede agregar hasta 4 grados escolares\";\n                this.sharedService.showSnackBar(mensaje, \"ERROR\", 3000);\n              } else {\n                this.datosRegion.push(valid.datos);\n              }\n            }\n\n            this.dataSourceRegiones.data = this.datosRegion;\n          }\n        }\n      });\n    }\n\n    loadCluesData(id) {\n      this.isLoading = true;\n      let params = {};\n      this.cluesService.obtenerDatosClues(id, params).subscribe(response => {\n        if (response.data.distrito) {\n          this.distrito = response.data.distrito;\n        }\n\n        if (typeof response === 'object') {\n          //this.datos_clues = response.data;\n          this.IniciarCatalogos(response.data);\n\n          if (response.data.catalogo_localidad) {\n            response.data.municipio_id = response.data.catalogo_localidad.catalogo_municipio_id;\n          }\n\n          this.cluesForm.patchValue(response.data);\n          this.inicio_operacion = response.data.inicio_operacion;\n          this.fecha_acreditacion = response.data.fecha_operacion;\n          /*console.log(this.cluesForm.get('fecha_operacion').value);\r\n          \r\n                  //if()\r\n          this.cluesForm.patchValue({'fecha_operacion': new Date(1960, 1, 1), 'inicio_operacion': new Date(1960, 1, 1)});          */\n          //console.log(response.data);\n\n          this.estatus_clues = true;\n        }\n\n        this.isLoading = false;\n      }, errorResponse => {\n        //console.log(errorResponse);\n        var errorMessage = \"Ocurrió un error.\";\n\n        if (errorResponse.status == 409) {\n          errorMessage = errorResponse.error.error.message;\n        }\n\n        this.sharedService.showSnackBar(errorMessage, null, 3000);\n        this.isLoading = false;\n      });\n    }\n\n    LimpiarLocalidad() {\n      this.cluesForm.patchValue({\n        catalogo_localidad: ''\n      });\n    }\n\n    displayResponsableFn(item) {\n      if (item) {\n        return item.nombre;\n      }\n    }\n\n    accionGuardar(validar = false) {\n      this.isLoading = true;\n      let formData = JSON.parse(JSON.stringify(this.cluesForm.value)); //console.log(formData);\n\n      if (formData.microrregion_id != null && formData.localidad_id != null) {\n        formData.microrregion_id = formData.microrregion_id.id;\n        formData.localidad_id = formData.localidad_id.id;\n      }\n\n      delete formData.microrregiones;\n      delete formData.localidades;\n      this.cluesService.actualizarClues(this.clues, formData).subscribe(respuesta => {\n        this.isLoading = false;\n        this.sharedService.showSnackBar(\"Se ha guardado correctamente\", \"Correcto\", 4000);\n        this.router.navigate(['/catalogos/clues']);\n      }, errorResponse => {\n        console.log(errorResponse);\n        var errorMessage = \"Ocurrió un error.\";\n\n        if (errorResponse.status == 409) {\n          errorMessage = errorResponse.error.error.message;\n        } else {\n          errorMessage += ': ' + errorResponse.error.message;\n        }\n\n        this.sharedService.showSnackBar(errorMessage, null, 3000);\n        this.isLoading = false;\n      });\n    }\n\n  }\n\n  EditarComponent.ɵfac = function EditarComponent_Factory(t) {\n    return new (t || EditarComponent)(i0.ɵɵdirectiveInject(i1.SharedService), i0.ɵɵdirectiveInject(i2.CluesService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i5.FormBuilder), i0.ɵɵdirectiveInject(i6.MatDialog), i0.ɵɵdirectiveInject(i4.Router));\n  };\n\n  EditarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EditarComponent,\n    selectors: [[\"app-editar\"]],\n    decls: 79,\n    vars: 25,\n    consts: [[1, \"profile\"], [\"fxLayout\", \"row\", \"fxLayout.xs\", \"column\", \"fxLayoutAlign\", \"space-evenly start\", 2, \"padding-top\", \"5px\"], [\"fxFlex\", \"90\", \"fxLayout\", \"column\", 1, \"form-container\", 3, \"formGroup\"], [\"class\", \"edit-loading-shade\", 4, \"ngIf\"], [\"fxFlex\", \"\"], [\"mat-dialog-title\", \"\"], [1, \"edit-container\"], [\"fxLayout.gt-sm\", \"row\", \"fxLayout\", \"column\", \"fxLayoutGap.gt-sm\", \"10px\"], [\"fxFlex\", \"30\", \"fxFlex.xs\", \"100\"], [\"matInput\", \"\", \"formControlName\", \"clues\", \"placeholder\", \"Clues\", \"type\", \"text\"], [4, \"ngIf\"], [\"fxFlex\", \"70\", \"fxFlex.xs\", \"100\"], [\"matInput\", \"\", \"formControlName\", \"descripcion\", \"placeholder\", \"Nombre Unidad\", \"type\", \"text\"], [\"matInput\", \"\", \"formControlName\", \"direccion\", \"placeholder\", \"Direcci\\u00F3n\", \"type\", \"text\"], [\"matInput\", \"\", \"formControlName\", \"cp\", \"placeholder\", \"C.P.\", \"type\", \"text\"], [\"fxFlex\", \"\", \"fxFlex.xs\", \"30\", 4, \"ngIf\"], [\"fxFlex\", \"\", \"fxFlex.xs\", \"25\"], [\"fxFlex\", \"25\", \"fxFlex.xs\", \"100\"], [\"formControlName\", \"municipio_id\", \"required\", \"\", 3, \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"fxFlex\", \"20\", \"fxFlex.xs\", \"100\"], [\"matInput\", \"\", \"placeholder\", \"Localidad\", \"formControlName\", \"catalogo_localidad\", 3, \"matAutocomplete\"], [3, \"displayWith\", \"panelWidth\"], [\"localidadAutocomplete\", \"matAutocomplete\"], [\"class\", \"is-loading\", 4, \"ngIf\"], [\"fxFlex\", \"10\", \"fxFlex.xs\", \"100\"], [\"matInput\", \"\", \"formControlName\", \"telefono\", \"placeholder\", \"Tel\\u00E9fono\"], [\"matInput\", \"\", \"formControlName\", \"nucleos_camas\", \"placeholder\", \"N\\u00B0 Camas\", \"type\", \"number\"], [\"fxFlex\", \"20\"], [\"matInput\", \"\", \"formControlName\", \"latitud\", \"placeholder\", \"Latitud\", \"type\", \"text\"], [\"matInput\", \"\", \"formControlName\", \"longitud\", \"placeholder\", \"Longitud\", \"type\", \"text\"], [\"fxHide.xs\", \"true\", \"fxLayout.xs\", \"column\"], [\"mat-raised-button\", \"\", \"routerLink\", \"/catalogos/clues\"], [1, \"edit-loading-shade\"], [\"fxFlex\", \"\", \"fxFlex.xs\", \"30\"], [\"formControlName\", \"catalogo_microrregion_id\", \"required\", \"\"], [3, \"value\"], [1, \"is-loading\"], [\"diameter\", \"25\"], [\"mat-raised-button\", \"\", \"color\", \"success\", 3, \"disabled\", \"click\"]],\n    template: function EditarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"section\", 1)(2, \"section\", 2);\n        i0.ɵɵtemplate(3, EditarComponent_div_3_Template, 2, 1, \"div\", 3);\n        i0.ɵɵelementStart(4, \"mat-card\", 4)(5, \"h1\", 5)(6, \"mat-icon\");\n        i0.ɵɵtext(7, \"local_hospital\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(8, \"\\u00A0DATOS PRINCIPALES DE LA UNIDAD\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"mat-card-content\")(10, \"section\", 6)(11, \"div\", 7)(12, \"mat-form-field\", 8);\n        i0.ɵɵelement(13, \"input\", 9);\n        i0.ɵɵtemplate(14, EditarComponent_mat_error_14_Template, 2, 1, \"mat-error\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"mat-form-field\", 11);\n        i0.ɵɵelement(16, \"input\", 12);\n        i0.ɵɵtemplate(17, EditarComponent_mat_error_17_Template, 2, 1, \"mat-error\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 7)(19, \"mat-form-field\", 11);\n        i0.ɵɵelement(20, \"input\", 13);\n        i0.ɵɵtemplate(21, EditarComponent_mat_error_21_Template, 2, 1, \"mat-error\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"mat-form-field\", 8);\n        i0.ɵɵelement(23, \"input\", 14);\n        i0.ɵɵtemplate(24, EditarComponent_mat_error_24_Template, 2, 1, \"mat-error\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"div\", 7);\n        i0.ɵɵtemplate(26, EditarComponent_mat_form_field_26_Template, 5, 1, \"mat-form-field\", 15);\n        i0.ɵɵelementStart(27, \"div\", 16)(28, \"mat-label\");\n        i0.ɵɵtext(29, \"Distrito:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"br\");\n        i0.ɵɵtemplate(31, EditarComponent_b_31_Template, 2, 2, \"b\", 10);\n        i0.ɵɵelement(32, \"br\");\n        i0.ɵɵtemplate(33, EditarComponent_b_33_Template, 2, 0, \"b\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"mat-form-field\", 17)(35, \"mat-label\");\n        i0.ɵɵtext(36, \"MUNICIPIO \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"mat-select\", 18);\n        i0.ɵɵlistener(\"selectionChange\", function EditarComponent_Template_mat_select_selectionChange_37_listener() {\n          return ctx.LimpiarLocalidad();\n        });\n        i0.ɵɵtemplate(38, EditarComponent_mat_option_38_Template, 2, 2, \"mat-option\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(39, EditarComponent_mat_error_39_Template, 2, 1, \"mat-error\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"mat-form-field\", 20)(41, \"mat-label\");\n        i0.ɵɵtext(42, \"Localidad (SEDE)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"input\", 21);\n        i0.ɵɵelementStart(44, \"mat-autocomplete\", 22, 23);\n        i0.ɵɵtemplate(46, EditarComponent_mat_option_46_Template, 2, 0, \"mat-option\", 24);\n        i0.ɵɵtemplate(47, EditarComponent_ng_container_47_Template, 2, 1, \"ng-container\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(48, EditarComponent_mat_hint_48_Template, 2, 1, \"mat-hint\", 10);\n        i0.ɵɵtemplate(49, EditarComponent_mat_error_49_Template, 2, 1, \"mat-error\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(50, \"div\", 7)(51, \"mat-form-field\", 25);\n        i0.ɵɵelement(52, \"input\", 26);\n        i0.ɵɵtemplate(53, EditarComponent_mat_error_53_Template, 2, 1, \"mat-error\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"mat-form-field\", 25);\n        i0.ɵɵelement(55, \"input\", 27);\n        i0.ɵɵtemplate(56, EditarComponent_mat_error_56_Template, 2, 1, \"mat-error\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"div\", 28)(58, \"mat-label\");\n        i0.ɵɵtext(59, \"Fecha de Inicio de Operaci\\u00F3n: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(60, \"br\");\n        i0.ɵɵtext(61);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(62, \"div\", 28)(63, \"mat-label\");\n        i0.ɵɵtext(64, \"Fecha de Acreditaci\\u00F3n: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(65, \"br\");\n        i0.ɵɵtext(66);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(67, \"mat-form-field\", 20);\n        i0.ɵɵelement(68, \"input\", 29);\n        i0.ɵɵtemplate(69, EditarComponent_mat_error_69_Template, 2, 1, \"mat-error\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(70, \"mat-form-field\", 20);\n        i0.ɵɵelement(71, \"input\", 30);\n        i0.ɵɵtemplate(72, EditarComponent_mat_error_72_Template, 2, 1, \"mat-error\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(73, \"br\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(74, \"mat-card-actions\", 31);\n        i0.ɵɵelement(75, \"span\", 4);\n        i0.ɵɵelementStart(76, \"button\", 32);\n        i0.ɵɵtext(77, \"Volver a la lista\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(78, EditarComponent_ng_container_78_Template, 5, 1, \"ng-container\", 10);\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        const _r10 = i0.ɵɵreference(45);\n\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.cluesForm);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"clues\").invalid && (ctx.cluesForm.get(\"clues\").dirty || ctx.cluesForm.get(\"clues\").touched));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"descripcion\").invalid && (ctx.cluesForm.get(\"descripcion\").dirty || ctx.cluesForm.get(\"descripcion\").touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"direccion\").invalid && (ctx.cluesForm.get(\"direccion\").dirty || ctx.cluesForm.get(\"direccion\").touched));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"cp\").invalid && (ctx.cluesForm.get(\"cp\").dirty || ctx.cluesForm.get(\"cp\").touched));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.catalogos[\"microrregiones\"]);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.distrito != null);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.distrito == null);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.catalogos[\"municipio\"]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"municipio_id\").invalid && (ctx.cluesForm.get(\"municipio_id\").dirty || ctx.cluesForm.get(\"municipio_id\").touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"matAutocomplete\", _r10);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"displayWith\", ctx.displayLocalidadFn)(\"panelWidth\", \"auto\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.localidadIsLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.localidadIsLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"catalogo_localidad\").value);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"catalogo_localidad\").invalid && (ctx.cluesForm.get(\"catalogo_localidad\").dirty || ctx.cluesForm.get(\"catalogo_localidad\").touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"telefono\").invalid && (ctx.cluesForm.get(\"telefono\").dirty || ctx.cluesForm.get(\"telefono\").touched));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"nucleos_camas\").invalid && (ctx.cluesForm.get(\"nucleos_camas\").dirty || ctx.cluesForm.get(\"nucleos_camas\").touched));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"\", ctx.inicio_operacion, \" \");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"\", ctx.fecha_acreditacion, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"latitud\").invalid && (ctx.cluesForm.get(\"latitud\").dirty || ctx.cluesForm.get(\"latitud\").touched));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.cluesForm.get(\"longitud\").invalid && (ctx.cluesForm.get(\"longitud\").dirty || ctx.cluesForm.get(\"longitud\").touched));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.puedeGuardar);\n      }\n    },\n    directives: [i7.DefaultLayoutDirective, i7.DefaultLayoutAlignDirective, i7.DefaultFlexDirective, i5.NgControlStatusGroup, i5.FormGroupDirective, i8.NgIf, i9.MatSpinner, i10.MatCard, i6.MatDialogTitle, i11.MatIcon, i10.MatCardContent, i7.DefaultLayoutGapDirective, i12.MatFormField, i13.MatInput, i5.DefaultValueAccessor, i5.NgControlStatus, i5.FormControlName, i12.MatError, i12.MatLabel, i14.MatSelect, i5.RequiredValidator, i8.NgForOf, i15.MatOption, i16.MatAutocompleteTrigger, i16.MatAutocomplete, i12.MatHint, i5.NumberValueAccessor, i10.MatCardActions, i17.DefaultShowHideDirective, i18.MatButton, i4.RouterLink],\n    styles: [\".edit-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.edit-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.15);z-index:999;display:flex;align-items:center;justify-content:center}.no-results-found[_ngcontent-%COMP%]{text-align:center;font-style:italic}.form-container[_ngcontent-%COMP%]{position:relative;min-height:200px;display:flex;flex-direction:column;padding:10px}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}agm-map[_ngcontent-%COMP%]{height:300px}.agm-map-container-inner[_ngcontent-%COMP%]{width:inherit;height:inherit}.agm-map-content[_ngcontent-%COMP%]{display:none}\"]\n  });\n  return EditarComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}