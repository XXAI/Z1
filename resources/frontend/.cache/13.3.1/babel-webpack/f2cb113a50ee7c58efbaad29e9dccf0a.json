{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Output, EventEmitter } from '@angular/core';\nimport { User } from 'src/app/auth/models/user';\nimport { NavigationEnd } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nlet HeaderComponent = class HeaderComponent {\n  constructor(authService, appsService, sharedService, router) {\n    this.authService = authService;\n    this.appsService = appsService;\n    this.sharedService = sharedService;\n    this.router = router;\n    this.onSidenavToggle = new EventEmitter();\n    this.breakpoint = 6;\n    router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(event => {\n      this.getApps();\n      let routes = event.url.split('/', 2);\n      let selected_route = routes[1];\n      let currentApp = this.sharedService.getCurrentApp();\n\n      if (currentApp.name != selected_route) {\n        this.sharedService.newCurrentApp(selected_route);\n      }\n\n      if (selected_route) {\n        this.selectedApp = this.apps.find(function (element) {\n          return element.route == selected_route;\n        });\n      } else {\n        this.selectedApp = undefined;\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.isAuthenticated = this.authService.isAuth();\n\n    if (this.isAuthenticated) {\n      this.user = this.authService.getUserData();\n    }\n\n    this.authSubscription = this.authService.authChange.subscribe(status => {\n      this.isAuthenticated = status;\n\n      if (status) {\n        this.user = this.authService.getUserData();\n      } else {\n        this.user = new User();\n      }\n    });\n    this.breakpoint = window.innerWidth <= 599 ? 3 : 6;\n  }\n\n  getApps() {\n    this.apps = this.appsService.getApps();\n  }\n\n  onResize(event) {\n    this.breakpoint = event.target.innerWidth <= 599 ? 3 : 6;\n  }\n\n  ngOnDestroy() {\n    this.authSubscription.unsubscribe();\n  }\n\n  toggleSidenav() {\n    this.onSidenavToggle.emit();\n  }\n\n  logout() {\n    this.authService.logout();\n  }\n\n};\n\n__decorate([Output()], HeaderComponent.prototype, \"onSidenavToggle\", void 0);\n\nHeaderComponent = __decorate([Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})], HeaderComponent);\nexport { HeaderComponent };","map":null,"metadata":{},"sourceType":"module"}