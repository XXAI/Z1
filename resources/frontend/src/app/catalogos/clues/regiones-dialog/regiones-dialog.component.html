<section  fxFlex="100" fxFlex.xs="100" [formGroup]="RegionesForm">
    <div class="data-loading-shade" *ngIf="isLoading">
        <mat-progress-bar color="accent" mode="indeterminate" style="margin-bottom: 1em;" *ngIf="isLoading"></mat-progress-bar>
    </div>

    <mat-card>
        <mat-card-title>Regiones</mat-card-title>
        <mat-card-content>


            <mat-form-field fxFlex fxFlex.xs="100" >
                <input matInput placeholder="Unidad Medica" [matAutocomplete]="cluesAutocomplete" formControlName='clues' >
                <mat-autocomplete #cluesAutocomplete="matAutocomplete" >
                    <mat-option *ngIf="cluesIsLoading" class="is-loading" ><mat-spinner diameter="25"></mat-spinner></mat-option>
                    <ng-container *ngIf="!cluesIsLoading">
                        <mat-option *ngFor="let item of filteredClues" [value]="item">
                            ({{ item.id }}) - {{ item.descripcion }}
                        </mat-option>
                    </ng-container>
                </mat-autocomplete>
                <input type="hidden" formControlName='clues'>
            </mat-form-field>

            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px">

                <mat-form-field fxFlex appearance="fill"  *ngIf="!catalogos['tipos_caminos']">
                    <mat-label>Tipo de Camino:</mat-label>
                    <input matInput formControlName="catalogo_tipo_camino_id">
                    <mat-hint>Escribe el nombre de la localidad</mat-hint>
                    <!-- <mat-error *ngIf="pacienteForm.controls['seguimientos'].get('servicio_actual_id').hasError('required')">Este campo es obligatorio</mat-error> -->
                </mat-form-field>
    
                <mat-form-field fxFlex *ngIf="catalogos['tipos_caminos']">
                    <mat-label>Tipo de Camino:</mat-label>
                    <input type="text" aria-label="catalogo_tipo_camino_id" matInput formControlName="catalogo_tipo_camino_id" [matAutocomplete]="tipoCaminoAutocomplete">
                    <mat-autocomplete #tipoCaminoAutocomplete="matAutocomplete" [displayWith]="getDisplayFn('descripcion')">
                        <mat-option *ngFor="let item of filteredCatalogs['tipos_caminos'] | async" [value]="item">
                            {{item.descripcion}}
                        </mat-option>
                    </mat-autocomplete>
                    <mat-hint *ngIf="!RegionesForm.get('catalogo_tipo_camino_id').value">Selecciona una Localidad de la lista</mat-hint>
                    <mat-hint align="end" *ngIf="RegionesForm.get('catalogo_tipo_camino_id').value">Descripción: [{{RegionesForm.get('catalogo_tipo_camino_id').value.descripcion}}]</mat-hint>
                    <!-- <mat-error *ngIf="pacienteForm.controls['seguimientos'].get('servicio_actual_id').hasError('required')">Este campo es obligatorio</mat-error> -->
                </mat-form-field>

            </div>
<!-- 
            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                <mat-form-field fxFlex="100" fxFlex.xs="100">
                    <mat-label>Grado academico </mat-label>
                    <mat-select formControlName="catalogo_tipo_camino_id" (selectionChange) = "obtener_texto($event)" required>
                        <mat-option *ngFor="let item of catalogos" [value]="item.id">
                            {{item.descripcion}}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="RegionesForm.get('catalogo_tipo_camino_id').invalid && (RegionesForm.get('catalogo_tipo_camino_id').dirty || RegionesForm.get('catalogo_tipo_camino_id').touched)">
                        <span *ngIf="RegionesForm.get('catalogo_tipo_camino_id').errors.required">Campo obligatorio</span>
                    </mat-error>
                </mat-form-field>
            </div>

            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                <mat-form-field fxFlex="45" fxFlex.xs="100">
                    <mat-label>Nombre del titulo o diploma</mat-label>
                    <input matInput placeholder="Titulo o Diploma" [matAutocomplete]="tituloAutocomplete" formControlName='nombre_estudio'   required>
                   <mat-autocomplete #tituloAutocomplete="matAutocomplete" [displayWith]="displayTituloFn" [panelWidth]="'auto'">
                        <mat-option *ngIf="tituloIsLoading" class="is-loading"><mat-spinner diameter="25"></mat-spinner></mat-option>
                        <ng-container *ngIf="!tituloIsLoading">
                            <mat-option *ngFor="let item of filteredTitulo" [value]="item">
                                 {{ item.descripcion }}
                            </mat-option>
                        </ng-container>
                    </mat-autocomplete>
                   
                </mat-form-field>
                <div fxFlex="10" fxFlex.xs="100">
                    <br>
                    <mat-checkbox  formControlName="otro_estudio" #otro_titulo (click)="activar_otro_titulo(otro_titulo.checked)">Otro</mat-checkbox>
                </div> 
                <mat-form-field fxFlex="45" fxFlex.xs="100">
                    <input matInput formControlName="otro_nombre_estudio" placeholder="Otro" required>
                    <mat-error *ngIf="RegionesForm.get('otro_nombre_estudio').invalid && (RegionesForm.get('otro_nombre_estudio').dirty || RegionesForm.get('otro_nombre_estudio').touched)">
                        <span *ngIf="RegionesForm.get('otro_nombre_estudio').errors.required">Campo obligatorio</span>
                    </mat-error>
                </mat-form-field>
            </div>

            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                <mat-form-field fxFlex="45" fxFlex.xs="100">
                    <mat-label>Institución educativa</mat-label>
                    <input matInput placeholder="Institución educativa" [matAutocomplete]="institucionAutocomplete" formControlName='institucion'   required>
                    <mat-autocomplete #institucionAutocomplete="matAutocomplete" [displayWith]="displayInstitucionFn" [panelWidth]="'auto'">
                        <mat-option *ngIf="institucionIsLoading" class="is-loading"><mat-spinner diameter="25"></mat-spinner></mat-option>
                        <ng-container *ngIf="!institucionIsLoading">
                            <mat-option *ngFor="let item of filteredInstitucion" [value]="item">
                                {{ item.descripcion }}
                            </mat-option>
                        </ng-container>
                    </mat-autocomplete>
                   
                </mat-form-field>
                <div fxFlex="10" fxFlex.xs="100">
                    <br>
                    <mat-checkbox  formControlName="otro_institucion" #otro_institucion (click)="activar_otro_institucion(otro_institucion.checked)">Otro</mat-checkbox>
                </div> 
                <mat-form-field fxFlex="45" fxFlex.xs="100">
                    <input matInput formControlName="otro_nombre_institucion" placeholder="Otro" required>
                    <mat-error *ngIf="RegionesForm.get('otro_nombre_institucion').invalid && (RegionesForm.get('otro_nombre_institucion').dirty || RegionesForm.get('otro_nombre_institucion').touched)">
                        <span *ngIf="RegionesForm.get('otro_nombre_institucion').errors.required">Campo obligatorio</span>
                    </mat-error>
                </mat-form-field>
            </div>

            <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="3px">
                <mat-form-field fxFlex="50" fxFlex.xs="100">
                    <mat-label>¿Tiene cédula profesional?</mat-label>
                    <mat-select formControlName="cedula" #cedula  (selectionChange) = "tiene_cedula(cedula.value)" required>
                        <mat-option [value]="0">NO</mat-option>
                        <mat-option [value]="1">SI</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field fxFlex="50" fxFlex.xs="100">
                    <mat-label>No. de Cédula</mat-label>
                    <input matInput placeholder="No. de Cedula"  formControlName='no_cedula'   required>
                    <mat-error *ngIf="RegionesForm.get('no_cedula').invalid && (RegionesForm.get('no_cedula').dirty || RegionesForm.get('no_cedula').touched)">
                        <span *ngIf="RegionesForm.get('no_cedula').errors.required">Campo obligatorio</span>
                    </mat-error>
                </mat-form-field>
            </div> -->
            



        </mat-card-content>
        <mat-card-actions>
            <button mat-raised-button (click)="cancelar()">Cancelar</button>
            <button mat-raised-button color="primary" [disabled]="!RegionesForm.valid" (click)="guardar()">Agregar</button>
        </mat-card-actions>
    </mat-card>
</section>     
